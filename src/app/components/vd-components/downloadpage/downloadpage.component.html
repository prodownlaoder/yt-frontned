<app-navbar></app-navbar>

<div class="flex justify-center items-center mt-2 sm:mt-10 px-2">
  <div class="w-full max-w-md rounded-2xl overflow-hidden shadow-xl  p-5" *ngIf="videoData; else errorBlock">

    <!-- Uploader Info -->
    <div class="flex items-center gap-4 border border-gray-100 rounded-xl p-2 mb-4">
      <img src="youtube.webp" alt="Uploader" class="w-12 h-12 object-cover" />
      <div class="flex flex-col">
        <p class="text-gray-800 font-bold text-sm leading-tight">{{ videoData?.uploader }}</p>
        <p class="text-xs text-gray-500">{{ videoData?.platform }}</p>
      </div>
    </div>

    <!-- Thumbnail (Responsive Height) -->
    <div class="relative rounded-xl overflow-hidden mb-4">
      <img [src]="videoData?.thumbnail" alt="Video thumbnail" class="w-full object-cover h-48 sm:h-72" />
    </div>

    <!-- Video Title -->
    <div class="text-center text-lg font-semibold px-2 mb-4">
      {{ videoData?.title }}
    </div>

    <!-- Download Progress & Button -->
    <div class="relative w-full h-12 rounded-xl border border-gray-300 overflow-hidden mb-4">
      <!-- Progress Fill -->
      <div class="absolute top-0 left-0 h-full bg-gradient-to-r from-cyan-500 to-cyan-600  transition-all duration-300 ease-linear z-0"
           [ngStyle]="{ width: progressPercent + '%' }"></div>

      <!-- Button on Top -->
      <button (click)="handleDownload()"
              class="relative z-10 flex items-center justify-center w-full h-full text-black bg-transparent rounded-xl font-medium"
              [disabled]="!downloadUrl && showProgress">
        {{ downloadButtonText }}
      </button>
    </div>

    <!-- Error Message (Red Box with Icon) -->
    <div *ngIf="errorMessage" class="flex items-center justify-center gap-2 bg-red-100 text-red-600 px-4 py-2 rounded-md text-sm mb-4 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01M12 2a10 10 0 100 20 10 10 0 000-20z" />
      </svg>
      {{ errorMessage }}
    </div>

    <!-- Share Message -->
    <p class="text-center text-sm text-gray-600 font-serif px-2 leading-relaxed">
      Download faster, save easier! Share this app with your friends and family.
    </p>
  </div>
</div>

<!-- Error fallback -->
<ng-template #errorBlock>
  <div class="text-center mt-10 text-red-500 text-sm px-4">
    {{ errorMessage }}
  </div>
</ng-template>

<app-footer></app-footer>
